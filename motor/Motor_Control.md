# 推荐书籍

> 乌曼《电机学》
>
> 谭建成《永磁无刷直流电机技术》
>
> 叶金虎《现代无刷直流永磁电动机的原理和设计》
>
> 胡寿松《自动控制原理》
>
> 《电机和电源控制中的最新微控制器技术》
>
> 

# 1. 电机分类

## 1.1 直流电机

- 直流有刷电机
- 直流有刷减速电机
- 直流无刷电机
- 直流无刷减速电机

**”减速“：**构造上多一个减速齿轮组，普通的直流电机当空载时，电机的转速由电压决定; 直流减速电机的转速由齿轮组和电压决定。齿轮组的作用是，提供较低的转速，较大的力矩；同时不同的减速比会提供不同的转速和力矩。这样就大大提高了减速电机的使用率

**有刷与无刷：**有无碳刷，有刷电机电机工作时需要线圈和换向器旋转，磁钢和碳刷不转，线圈电流方向的交替变化是随电机转动的换相器和电刷来完成的。无刷直流电动机是采用半导体开关器件来实现电子换向的，使用电子开关器件代替传统的接触式换向器和电刷

## 1.2 步进电机

步进电机是一种可以将脉冲信号转换为角位移或线位移的开环控制电机，在空载低频的情况下，一个脉冲就是一步，可以精准的控制旋转角度;

| 构造方式 | 特性                                                         |
| -------- | ------------------------------------------------------------ |
| 反应式   | 结构简单、成本低、步距角小，可达 1.2°、但动态性能差、效率低、发热大，可靠性难保证。 |
| 永磁式   | 其特点是动态性能好、输出力矩大，但这种电机精度差，步矩角大（一般为 7.5° 或 15°）。 |
| 混合式   | 其特点是输出力矩大、动态性能好，步距角小，但结构复杂、成本相对较高 |

两相混合式步进电机

**42 步进电机：**42 步进电机是指步进的尺寸，混合式步进电机一般都是正方形，外框尺寸为 42mm*42mm

## 1.3 伺服电机

绝对服从控制信号指挥电机，所以伺服电机是指在伺服系统中被控制的电机如果单指一个电机的话，那只能算一个被控的机械元件，但是加上**闭环控制系统就可以称之为伺服系统中的电机**

伺服电机分为直流和交流伺服电动机两大类，其主要特点是，当信号电压为零时无自转现象，转速随着转矩的增加而匀速下降。

**直流伺服电机特性：**

1. 机械特性在输入的电枢电压保持不变时，电机的转速随电磁转矩变化而变化的规律
2. 调节特性直流电机在一定的电磁转矩（或负载转矩）下电机的稳态转速随电枢的控制电压变化而变化
3. 动态特性从原来的稳定状态到新的稳定状态，存在一个过渡过程，这就是直流电机的动态特性

**交流伺服电机特性**

1. 无电刷和换向器，因此工作可靠，对维护和保养要求低
2. 定子绕组散热比较方便
3. 惯量小，易于提高系统的快速性
4. 适应于高速大力矩工作状态

## 1.4 舵机

舵机是一种常见的伺服电机，由小型直流电机、控制电路板、电位计和齿轮组构成

**按照信号类型划分为模拟信号舵机和数字信号舵机**

- 模拟舵机：无 MCU 微控制器，电路为模拟电路，同样的舵机之间会有性能差异
- 数字舵机：有 MCU 控制器，一般内部采用算法优化，性能比模拟舵机好

**齿轮划分为金属齿轮舵机和塑料齿轮舵机：**

- 金属齿轮舵机：适用于大扭力和高速场合
- 塑料齿轮舵机：成本低适用于中低扭矩场合

# 2.驱动器分类

## 2.1 有刷电机驱动器

H 桥电路进行驱动，核心电路 H 桥加上一些必要的外围电路，共同组成直流有刷电机的驱动器

**集成电路形式的 H 桥**一般用于中小功率需求的应用，或者是对电路面积有要求的场合。

**分立元件形式的 H 桥**通常用于大功率或者超大功率需求的应用，主要由 MOSFET 或 IGBT 晶体管组成。

经典的直流有刷电机驱动芯片 L298N，其内部集成了两个 H 桥

## 2.2 无刷电机驱动器

无刷电机也是使用 H 桥电路进行驱动的，只不过是**电机的每一相都用一个半桥电路驱动**，一个三相无刷电机总共需要三个半桥，而不像直流有刷电机驱动那种使用全桥电路

## 2.3 步进电机驱动器

控制器将**步进脉冲和方向信号发送到步进电机驱动器**，驱动器将控制器发来的步进脉冲信号转换为激励步进电动机旋转所需的功率信号

## 2.4 伺服电机驱动器

用来驱动和控制伺服电机的控制器属于伺服系统的一部分，伺服电机驱动器接收和放大来自控制系统的命令信号，并将电流传输给伺服电机，以产生与命令信号成比例的运动。命令信号通常对伺服电机的位置、速度和力矩等参数进行控制，实现高精度的传动系统定位

# 3.直流有刷电机

## 3.1 直流有刷电机工作原理

左手定则：F=BILsinα

![](https://raw.githubusercontent.com/QLiwei/picgo/main/img/screenshot-20230221-101817.png) 

磁极方向的跳转是通过移动固定位置的接触点来完成的，该接触点在电机转子上与电触点相对连接。这种**固定触点**通常由**石墨**制成，与铜或其他金属相比，在**大电流短路或断路/起动过程中石墨不会熔断或者与旋转触点焊接到一起**，并且这个触点通常是弹簧承载的，所以能够获得持续的接触压力，保证向线圈供应电力。

-  C 和 D 两片半圆周的铜片构成换向器
- 两个弹性铜片靠在换向器两侧的 A 和 B 是电刷

## 3.2 直流有刷减速电机重要参数

- 空载转速：正常工作电压下电机不带任何负载的转速（单位为 r/min（转/分））
  - 空载转速由于没有反向力矩，所以输出功率和堵转情况不一样，该参数只是提供一个电机在规定电压下最大转速的参考
- 空载电流：正常工作电压下电机不带任何负载的工作电流（单位 mA（毫安））。
  - 越好的电机，在空载时，该值越小。
- 负载转速：正常工作电压下电机带负载的转速
- 负载力矩：正常工作电压下电机带负载的力矩（N·m（牛米））
- 负载电流：负载电流是指电机拖动负载时实际检测到的定子电流数值。
- 堵转力矩：在电机受反向外力使其停止转动时的力矩。
  - 如果电机堵转现象经常出现，则会损坏电机，或烧坏驱动芯片
  - 堵转时间一长，电机温度上升的很快，这个值也会下降的很厉害
- 堵转电流：在电机受反向外力使其停止转动时的电流，此时电流非常大，时间稍微就可能会烧毁电机
- 减速比：是指没有减速齿轮时转速与有减速齿轮时转速之比。
- 功率：般指的是它的额定功率（单位 W（瓦）），即在额定电压下能够长期正常运转的最大功率
  - 电动机在制造厂所规定的额定情况下运行时, 其输出端的机械功率

## 3.3 **直流有刷电机驱动**

### 3.3.1 **控制电路原理**

![H桥电路](https://raw.githubusercontent.com/QLiwei/picgo/main/img/screenshot-20230221-102931.png) 

- Q1，Q4导通电机顺时针旋转
- Q3，Q2导通电机逆时针旋转
- 当同一侧的 Q1 和 Q2 【  或者Q3 和Q4】同时导通时，电流将从电源先后经过 Q1 和 Q2【Q3 和Q4】，然后直接流到电源负极在这个回路中除了三极管以外就没有其他负载（没有经过电机），这时电流可能会达到最大值，此时可能会烧毁三极管

![](https://raw.githubusercontent.com/QLiwei/picgo/main/img/screenshot-20230221-103406.png) 

改进电路中新增加了两个非门和 4 个与门，以及 Q1 和 Q3 换成了 NPN 三极管，经过这样的组合就可以实现一个信号控制两个同一侧的三极管，并且可以保证在同一侧中两个三级管不会同时导通在同一时刻只会有一个三极管是导通的。

- ENABLE 脚接入高电平
- IN1高电平：【Q1截至 Q2导通】  IN2高电平【Q3截至 Q4导通】电机停转
- IN1高电平：【Q1截至 Q2导通】  IN2低电平【Q3导通 Q4截至】电机逆时针旋转
- IN1低电平：【Q1导通 Q2截至】  IN2高电平【Q3截至 Q4导通】电机顺时针旋转
- IN1低电平：【Q1导通 Q2截至】  IN2低电平【Q3导通 Q4截至】电机停转

### 3.3.2 驱动芯片

H 桥使用分立元件搭建比较麻烦，增加了硬件设计难度，当然如果集成 IC 无法满足我们的功率要求时，还是需要我们自己使用 MOS管、三极管等元件来搭建 H 桥电路，这样的分立元件搭建的 H 桥一般驱动能力都会比集成 IC 要高。当我们在选择集成 IC 时，我们需要考虑集成 IC 是否能满足电机的驱动电压要求，是否能承受电机工作时的电流

**L298N** **驱动芯片**

L298N 是 ST 公司的产品，内部包含 4 通道逻辑驱动电路，是一种二相和四相电机的专门驱动芯片，即内含两个 H 桥的高电压大电流双桥式驱动器，接收标准的 TTL 逻辑电平信号，可驱动4.5V~46V、2A 以下的电机，电流峰值输出可达 3A

![](https://raw.githubusercontent.com/QLiwei/picgo/main/img/screenshot-20230221-104327.png) 

![](https://raw.githubusercontent.com/QLiwei/picgo/main/img/screenshot-20230221-104723.png) 

## 3.4 直流有刷减速电机控制

### 3.4.1 速度控制

脉冲宽度调制（Pulse width modulation，PWM）信号，即 PWM 是一种按一定的规则对各脉冲的宽度进行调制，既可改变电路输出电压的大小，也可改变输出频率。

V=Vmax * Duty(占空比)

### 3.4.2 硬件设计

#### 3.4.2.1 L298N

驱动板可以支持 12-42V 的宽电压供电，并且带输入电压转 5V 的电压芯片，所以驱动板只需要一个电源输入

![](https://raw.githubusercontent.com/QLiwei/picgo/main/img/screenshot-20230221-110020.png) 

![](https://raw.githubusercontent.com/QLiwei/picgo/main/img/screenshot-20230221-110053.png) 

两个二极管是作为钳位使用，使得输出线上电压（或叫电位）被箝位在-0.7V~+Vcc+0.7V

#### 3.4.2.2 直流有刷电机驱动板-MOS管搭建板

驱动板可支持 12V~70V 的宽电压输入，10A 过电流保护电路，超过 10A 可自动禁用电机控制信号，最高功率支持 700W。PWM 控制信号使用了 TLP2362 高速光耦进行了隔离，SD 控制信号使用了 EL357N 光耦进行了隔离

![](https://raw.githubusercontent.com/QLiwei/picgo/main/img/screenshot-20230221-111730.png) 

![](https://raw.githubusercontent.com/QLiwei/picgo/main/img/screenshot-20230221-111818.png) 

EG2104S 主要功能有逻辑信号输入处理、死区时间控制、电平转换功能、悬浮自举电源结构和上下桥图腾柱式输出。逻辑信号输入端高电平阀值为 2.5V 以上，低电平阀值为 1.0V 以下，要求逻辑信号的输出电流小，可以使 MCU 输出逻辑信号直接连接到 EG2104S 的输入通道上。

芯片有一个 shutdown 引脚，逻辑输入控制信号低电平有效，控制强行使 LO、HO 输出低电平。这样可以直接使用这个引脚做软件控制电机的旋转与停止，还可以实现硬件的限流保护

![](https://raw.githubusercontent.com/QLiwei/picgo/main/img/screenshot-20230221-111927.png) 

#### 3.4.3 软件设计

| EN   | PWM1 | PWM2 | 电机状态 |
| ---- | ---- | ---- | -------- |
| 0    | x    | x    | 停止     |
| 1    | 100% | 100% | 停止     |
| 1    | x%   | 0    | 正转     |
| 1    | 0    | x%   | 反转     |

## 3.5 **直流有刷驱动板电流电压采集**

### 3.5.1 电流采样电路

![](https://raw.githubusercontent.com/QLiwei/picgo/main/img/screenshot-20230221-113331.png) 

在下图中使用电压比较器 LMV331SE 实现 10A 过流保护电路，电流采样电路中 Vi 经过隔离运放和普通运放后变成 Vcurrent_adc 输入到下图比较器的 IN-，当 IN-的电压超过 IN+ 时，比较器的 OUT将输出低电平到 74HC1G66GW（模拟开关）的 Y 端口和左下端的 NPN 型 MOS 管中。当 OUT 将输出低电平时，NPN-MOS 截止，此时 3V3 电压会供给 74HC1G66GW，让其使能，这样模拟开关就会闭合，74HC1G66GW 的 Y 端口与 Z 端口相当于连接在一起，低电平信号从 Z 端口，输出到下一级锁存器 SN74LVC1G373DBVR，锁存器对输入信号进行锁存并输出到与门。

![](https://raw.githubusercontent.com/QLiwei/picgo/main/img/screenshot-20230221-113547.png) 

![](https://raw.githubusercontent.com/QLiwei/picgo/main/img/screenshot-20230221-113847.png) 

![](https://raw.githubusercontent.com/QLiwei/picgo/main/img/screenshot-20230221-113926.png) 

### 3.5.2 电源电压采样电路

如下图所示是电源电压采样电路，在电源电压上并联 R18 和 R19、R59 的串联电阻，R19两端的电压作为隔离运放的输入，再经过隔离器件后差分输出，使用普通运放将差分输出转换成单端输出，连接到 STM32 的 ADC 采样通道。隔离运放的输入电压为 Vi，则有:Vi/R19=POWER/(R18+R59+R19)，带入电阻值可得：Vi=POWER/37，通过上一节中电流采样电流的计算方法可以计算得到 POWER_ADC=POWER/37+1.24，不同的是，电压检测部分的隔离器件是没有进行放大的。

# ![](https://raw.githubusercontent.com/QLiwei/picgo/main/img/screenshot-20230221-114210.png)4.无刷直流电机

无刷直流电机（Brushless Direct Current Motor，简称 BLDCM）由电动机主体和驱动器组成，是一种典型的机电一体化产品。

无刷电机是指无电刷和换向器（或集电环）的电机，又称无换向器电机。子交换，即无刷电机中使用电枢绕组作为定子，使用钕铁硼的永磁材料作为转子，以霍尔传感器取代碳刷换向器

## 4.1 无刷电机重要参数

- **额定电压**：无刷电机适合的工作电压，其实无刷电机适合的工作电压非常广，额定电压是指定了负载条件而得出的情况
  - 2212-850KV 电机指定了 1045 螺旋桨的负载，其额定工作电压就是 11V。如果减小负载，例如带 7040 螺旋桨，那这个电机完全可以工作在 22V 电压下
  - 工作电压也不是无限上升的，主要受制于电子控制器支持的最高频率
- **KV值**：有刷直流电机是根据额定工作电压来标注额定转速的，实际转速 =KV 值 * 工作电压，KV 的物理意义，就是在 1V 工作电压下每分钟的转速
  - 无刷直流电机的转速与电压呈正比关系，电机的转速会随着电压上升而线性上升
- **转矩与转速：**
  - 转矩:(力矩、扭矩）电机中转子产生的可以用来带动机械负载的驱动力矩，我们可以理解为电机的力量。
  - 转速: 电机每分钟的转速。
  - 电机的转矩和转速在同一个电机内永远是一个此消彼长的关系，基本可以认为转矩和转速的乘积是一个定数，即同一个电机的转速越高，必定其转矩越低，相反也依然。
- **最大电流和最大功率**
  - 最大电流: 电机能够承受并安全工作的最大电流
  - 每个电机都有自己的力量上限，最大功率就是这个上限，如果工作情况超过了这个最大功率，就会导致电机高温烧毁。
- **槽极结构（N:槽数 P极数）**
  - 铁芯极数（槽数)∶ 定子硅钢片的槽数量
  - 磁钢极数（极数)∶ 转子上磁钢的数量
    - 模型常见的内转子无刷电机结构有: 3N2P(有感电机常用)、12N4P(大部分内转子电机)
    - 模型常见的外转子无刷电机结构有:9N6P、9N12P、12N8P、12N10P、12N14P、18N16P、24N20P
    - 模型用内转子无刷电机极数不高的原因: 目前内转子电机多用于减速使用，所以要求的转速都比较高。电子转速 = 实际转速 * 电机极对数，电子控制器支持的最高电子转速往往都是一个定数，所以如果电机极对数太高的话，支持的最高电机转速就会下降，所以目前的内转子电机极数都是4 以内。
- **其他设计驱动需要的参数**
  - 定子电感：电动机静止时的定子绕组两端的电感。
  - 定子电阻：在 20℃ 下电动机每相绕组的直流电阻。
  - 反电动势系数：在规定条件下，电动机绕组开路时，单位转速在电枢绕组中所产生的线感应电动势值。

## 4.2 无刷直流电机工作原理

安培定则：右手螺旋定则

用右手握住通电直导线，让大拇指指向电流的方向，那么四指指向就是磁感线的环绕方向；

用右手握住通电螺线管，让四指指向电流的方向，那么大拇指所指的那一端是通电螺线管的 N 极，

### **4.2.1 三相星形联结的二二导通方式**

![](https://raw.githubusercontent.com/QLiwei/picgo/main/img/screenshot-20230221-145252.png) 

![](https://raw.githubusercontent.com/QLiwei/picgo/main/img/screenshot-20230221-145327.png) 

1. 在 A 端接入正电压，B 端接入负电压，C 端悬空，转子将会旋转至图中 1 的位置。
2. 在 1 的基础上，C 端接入正电压，B 端接入负电压，A 端悬空，转子将会从 1 的位置旋转至图中 2 的位置。
3. 在 2 的基础上，C 端接入正电压，A 端接入负电压，B 端悬空，转子将会从 2 的位置旋转至图中 3 的位置。
4. 在 3 的基础上，B 端接入正电压，A 端接入负电压，C 端悬空，转子将会从 3 的位置旋转至图中 4 的位置。
5.  在 4 的基础上，B 端接入正电压，C 端接入负电压，A 端悬空，转子将会从 4 的位置旋转至图中 5 的位置。
6. 在 5 的基础上，A 端接入正电压，C 端接入负电压，B 端悬空，转子将会从 5 的位置旋转至图中 6 的位置。

## 4.3 直流无刷电机驱动设计

**做三相六臂全桥驱动电路来驱动无刷电机**

![](https://raw.githubusercontent.com/QLiwei/picgo/main/img/screenshot-20230221-145602.png) 

6 拍工作方式

- Q1Q4,Q5Q4,Q5Q2,Q3Q2,Q3Q6,Q1Q6

想让一对 MOS 管导通时，是需要知道上一步导通的是哪两个 MOS,所以这里我们需要知道转子的位置信息



![](https://raw.githubusercontent.com/QLiwei/picgo/main/img/Hall_effect.gif) 

霍尔传感器是根据霍尔效应制作的一种磁场传感器。霍尔效应：当电流垂直于外磁场通过半导体时，载流子发生偏转，垂直于电流和磁场的方向会产生一附加电场，从而在半导体的两端产生电势差，这一现象就是霍尔效应，这个电势差也被称为霍尔电势差。

在 BLDC 中一般采用 3 个开关型霍尔传感器测量转子的位置，由其输出的 3 位二进制编码去控制三相六臂全桥中的 6 个 MOS 管的导通实现换相。

- 如果将一只霍尔传感器安装在靠近转子的位置，当 N 极逐渐靠近霍尔传感器即磁感器达到一定值时，其输出是导通状态；
- 当 N 极逐渐离开霍尔传感器、磁感应逐渐小时，其输出仍然保持导通状态；
- 只有磁场转变为 S 极便达到一定值时，其输出才翻转为截止状态。
- 在 S 和 N 交替变化下传感器输出波形占高、低电平各占 50%
- 如果转子是一对极，则电机旋转一周霍尔传感器输出一个周期的电压波形，如果转子是两对极，则输出两个周期的波形。

在直流无刷电机中一般把 3 个霍尔传感器按间隔 120 度或 60 度的圆周分布来安装，如果按间隔120 度来安装，则 3 个霍尔传感器输出波形相差 120 度电度角，输出信号中高、低电平各占 180度电度角。如果规定输出信号高电平用“1”表示，低电平用“0”表示，则输出的三个信号可以用三位二进制码表示，如下图所示。

![](https://raw.githubusercontent.com/QLiwei/picgo/main/img/screenshot-20230221-150852.png) 



![](https://raw.githubusercontent.com/QLiwei/picgo/main/img/screenshot-20230221-151017.png) 

对 MOS 管的控制有中两个特殊情况需要注意一下:

- 当按真值表中对应霍尔值导通 MOS 管后，就保持导通状态不变时，此时电机就会旋转到对应位置保持不变，此时电路中的电能将只能转换为热能，不能转换为机械能，而我们的电机绕组时候的是漆包铜线，其内阻非常的小，电流就会非常的大，这将会产生大量的热而导致电源或者电机被烧毁。
- 在上面的三相六臂全桥驱动电路原理图中如果同时导通 Q1 和 Q2，或者导通 Q3 和 Q4，或者导通 Q5 和 Q6，只要导通以上对应的两个 MOS 管，都会导致电路中的电机不能正常工作，而 MOS 管直接将电源的正负极接通，这无疑将会烧毁电源或者 MOS 管。

### 4.3.1 **驱动芯片与驱动电机设计**

![](https://raw.githubusercontent.com/QLiwei/picgo/main/img/screenshot-20230221-151321.png) 

![](https://raw.githubusercontent.com/QLiwei/picgo/main/img/screenshot-20230221-151607.png) 

![](https://raw.githubusercontent.com/QLiwei/picgo/main/img/screenshot-20230221-151647.png) 

![](https://raw.githubusercontent.com/QLiwei/picgo/main/img/screenshot-20230221-151716.png) 

IR2110S 主要功能有逻辑信号输入处理、电平转换功能和悬浮自举电源结构等。可以使 MCU 输出逻辑信号直接连接到 IR2110S 的输入通道上。IR2110S 芯片有一个 shutdown 引脚，逻辑输入控制信号高电平有效，控制强行使 LO、HO 输出低电平。这样可以直接使用这个引脚做软件控制电机的旋转与停止，还可以实现硬件的限流保护（后续章节分析保护电路），输入信号和输出信号逻辑真值表如下表所示。

![](https://raw.githubusercontent.com/QLiwei/picgo/main/img/screenshot-20230221-151816.png) 

## 4.4 无刷直流电机控制实现

### 4.4.1 速度控制原理

转速计算公式：V=(Ua-IaRa)/CEφ

• Ua——电机定子绕组的实际电压大小

• Ia——电机绕组内通过的实际电流大小

• Ra——电路系统中包含电机的回路电阻大小

• CE——电势系数

• φ——励磁磁通

我们可以对无刷直流电机的**供电电压**所处适当调整，从而降低线圈绕组通过电流大小，以期达到控制电机转速的目的，同前面讲到的直流有刷减速电机一样，直流无刷电机也可以使用脉宽调制信号（PWM）来进行速度控制，通常使用的 PWM 频率为十几或者几十千赫兹（不得超过 MOS 管的开关频率），这样把需要通电的MOS 管使用 PWM 来控制就可以实现速度的控制。

使用 PWM 控制直流无刷电机的策略包括 PWM-ON、ON-PWM、H_PWM-L_ON、H_ON-L_PWM和 H_PWM-L_PWM。这 5 种控制策略，均是电机处于 120° 运行方式下进行的

**这 5 种调制方式为：**

- \1. PWM-ON 型。在 120° 导通区间，各开关管前 60° 采用 PWM 调制，后 60° 则恒通。

- \2. ON-PWM 型。在 120° 导通区间，各开关管前 60° 恒通，后 60° 则采用 PWM 调制。

- \3. H_PWM-L_ON 型。在 120° 导通区间，上桥臂开关管采用 PWM 调制，下桥臂恒通。

- \4. H_ON-L_PWM 型。在 120° 导通区间，上桥臂开关管恒通，下桥臂采用 PWM 调制。

- \5. H_PWM-L_PWM 型。在 120° 导通区间，上、下桥臂均采用 PWM 调制。

![](https://raw.githubusercontent.com/QLiwei/picgo/main/img/screenshot-20230221-154340.png) 

# 5.编码器

编码器，是一种用来测量机械旋转或位移的传感器。这种传感器能够测量机械部件在旋转或直线运动时的位移位置或速度等信息，并将其转换成一系列电信号。

## 5.1分类

### 5.1.1 增量式编码器

增量式旋转编码器是将设备运动时的位移信息变成连续的脉冲信号，脉冲个数表示位移量的大小。只有当设备运动的时候增量式编码器才会输出信号。编码器一般会把这些信号分为通道 A和通道 B 两组输出，并且这两组信号间有 90° 的相位差。同时采集这两组信号就可以知道设备的运动和方向。除了通道 A、通道 B 以外，很多增量式编码器还会设置一个额外的通道 Z 输出信号，用来表示编码器特定的参考位置，传感器转一圈 Z 轴信号才会输出一个脉冲。增量式编码器只输出设备的位置变化和运动方向，不会输出设备的绝对位置。

### 5.1.2 绝对式编码器

绝对式旋转编码器是将设备运动时的位移信息通过二进制编码的方式变成数字量直接输出。这种编码器与增量式编码器的区别主要在内部的码盘。绝对式编码器的码盘利用若干透光和不透光的线槽组成一套二进制编码，这些二进制码与编码器转轴的每一个不同角度是唯一对应的，读取这些二进制码就能知道设备的绝对位置，所以叫它绝对式编码器。绝对式编码器一般常用自然二进制、格雷码或者 BCD 码等编码方式。

### 5.1.3 混合式绝对式编码器

混合式绝对式编码器，它输出两组信息：一组信息用于检测磁极位置，带有绝对信息功能；另一组则和增量式编码器的输出信息完全相同。

## 5.2 旋转编码器原理

旋转编码器的原理示意图如下图所示。旋转编码器内部大都由码盘、光电检测装置和信号处理电路等部分构成。码盘上刻了若干圈线槽，线槽等距并且可透光，当码盘旋转时就会周期性的透过和遮挡来自光电检测装置的光线，这样检测装置就会周期性的生成若干电信号。

### 5.2.1 增量式编码器原理

增量式编码器都有 A、B 两通道信号输出，这是因为增量式编码器的码盘上有两圈线槽，两圈线槽的之间会错开一定的角度，这个角度会使得光电检测装置输出的两相信号相差 1/4 周期 (90°)。

当码盘转动时，内圈和外圈的线槽会依次透过光线，光电检测装置检测到光线通断的变化，就会相应的输出脉冲信号，因为内外圈遮光和透光时候存在时间差，所以也就有了 A、B 两通道信号的相位差。

### 5.2.2 绝对式编码器原理

![](https://raw.githubusercontent.com/QLiwei/picgo/main/img/screenshot-20230221-164009.png) 

## 5.3 编码器参数

- 分辨率：指编码器能够分辨的最小单位
  - 对于增量式编码器，其分辨率表示为编码器转轴旋转一圈所产生的脉冲数，即脉冲数/转 (Pulse Per Revolution 或 PPR)。码盘上透光线槽的数目其实就等于分辨率，也叫多少线，较为常见的有 5-6000 线。
  - 绝对式编码器，内部码盘所用的位数就是它的分辨率，单位是位 (bit)，具体还分单圈分辨率和多圈分辨率
- 精度：精度是指编码器每个读数与转轴实际位置间的最大误差，通常用角度、角分或角秒来表示。
  - 有些绝对式编码器参数表里会写 ±20′′，这个就表示编码器输出的读数与转轴实际位置之间存在正负 20 角秒的误差，精度由码盘刻线加工精度、转轴同心度、材料的温度特性、电路的响应时间等各方面因素共同决定。
- 最大响应频率：指编码器每秒输出的脉冲数，单位是 Hz。计算公式：最大响应频率 = 分辨率 * 轴转速/60。
- 信号输出形式：对于增量式编码器，每个通道的信号独立输出，输出电路形式通常有集电极开路输出、推挽输出、差分输出等。对于绝对式编码器，由于是直接输出几十位的二进制数，为了确保传输速率和信号质量，一般采用串行输出或总线型输出，例如同步串行接口 (SSI)、RS485、CANopen 或 EtherCAT 等，也有一部分是并行输出，输出电路形式与增量式编码器相同。



# 6.控制系统与电机的关系

## 6.1 什么是控制系统

控制系统是指由控制主体，控制客体和控制媒体组成的具有自身目标和功能的管理系统。

为了使控制对象达到预期的稳定状态。例如一个水箱的温度控制，可以通过控制加热设备输出功率进而来改变水温达到目标温度，水箱的温度控制可以称之位一个简单的控制系统

## 6.2 自动控制系统的工作原理

对生产中某些关键参数进行自动控制，使它们在受到外界干扰的影响而偏离正常状态时能够被自动地调节而回到工艺所要求的数值范围。

### 6.2.1 闭环自动控制系统

闭环控制也就是负反馈控制，系统组成包括传感器，控制装置，执行机构。传感器检测被控对象的状态信息（输出量），并将其转变为物理（电）信息传给控制装置。控制装置比较被控对象当前状态（输出量）对希望状态（给定量）的偏差，产生一个控制信号，通过执行器机构驱动被空对象运动，使其运动状态接近希望状态。

![](https://raw.githubusercontent.com/QLiwei/picgo/main/img/screenshot-20230221-175216.png)

### 6.2.2 开环自动控制系统

开环控制不能检测误差，不能够校正误差，之恶能够按照事先确定好的程序和产生信号的条件，依次去控制对象并且无抑制的干扰能力

![](https://raw.githubusercontent.com/QLiwei/picgo/main/img/screenshot-20230221-175526.png) 

## 6.3 控制系统与电机由上面关系

在控制系统中有一个角色十分重要，他根据控制装置的信号改变着被控对象的状态--执行器。执行器的种类多种多样，可以使改变温度的电阻丝，改变转速的电机，只要是符合可以改变被控对象的状态多可以称之为执行器，

说电机加上相应的传输结构占执行器的一大部分，所以说控制电机就变成了十分重要的内容。电机控制的好坏直接决定于被控对象状态改变的是否准确。电机的控制是对电机的启动、加速、运转、减速以及停止进行控制，通过对其控制达到快速启动、快速响应、高效率、高扭矩输出和高过载能力的目的。